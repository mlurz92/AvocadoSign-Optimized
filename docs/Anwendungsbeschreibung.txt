# **Anwendungsbeschreibung: Avocado Sign vs. T2 Kriterien Analyse v2.5.0**

## **1\. Einleitung**

### **1.1 Zweck der Anwendung**

Diese Webanwendung ist ein hochspezialisiertes Analyse- und Visualisierungswerkzeug für die medizinisch-radiologische Forschung. Ihr primärer Zweck ist der **Vergleich der diagnostischen Güte des "Avocado Signs" (AS)** mit etablierten **morphologischen T2-Kriterien** für das MRT-basierte Lymphknoten-Staging beim Rektumkarzinom.

Die Anwendung ermöglicht es Forschern und Radiologen:

* Eine integrierte Patientenkohorte zu explorieren.  
* MRT-basierte T2-Kriterien interaktiv zu definieren und anzuwenden.  
* Umfassende statistische Analysen zur diagnostischen Performance durchzuführen.  
* Die Ergebnisse in publikationsreifen Diagrammen und Tabellen zu visualisieren.  
* Einen strukturierten Entwurf für ein wissenschaftliches Manuskript, formatiert nach den Richtlinien des Fachjournals "Radiology", zu generieren.

### **1.2 Wissenschaftlicher Hintergrund**

Das N-Staging, die Beurteilung des Lymphknotenstatus, ist ein kritischer prognostischer Faktor beim Rektumkarzinom. Während das **Avocado Sign** ein neuer, vielversprechender MRT-Marker ist, stützt sich die klinische Routine aktuell auf eine Kombination verschiedener **morphologischer T2-Kriterien** (Größe, Form, Kontur etc.). Diese Anwendung dient der direkten, datenbasierten Gegenüberstellung dieser Methoden, um deren jeweilige Stärken und Schwächen zu evaluieren.

### **1.3 Zielgruppe**

Die Anwendung richtet sich an **Radiologen, klinische Forscher und Medizinstatistiker**, die auf dem Gebiet der onkologischen Bildgebung, insbesondere des Rektumkarzinoms, tätig sind.

### **1.4 Kernfunktionen im Überblick**

* **Interaktive Kriteriendefinition:** Dynamische Anpassung von T2-Kriterien mit sofortiger Neuberechnung aller abhängigen Ergebnisse.  
* **Brute-Force-Optimierung:** Automatische Suche nach dem T2-Kriterienset mit der höchsten diagnostischen Güte für eine ausgewählte Metrik.  
* **Vergleichende Statistik:** Direkter statistischer Vergleich (DeLong, McNemar) zwischen dem Avocado Sign und verschiedenen T2-Kriteriensets.  
* **Dynamische Visualisierung:** Interaktive ROC-Kurven, Konfusionsmatrizen und Performanz-Diagramme.  
* **Manuskript-Generator:** Erstellung eines vollständigen, vorformatierten Publikationsentwurfs inklusive Texten, Tabellen und Abbildungen.  
* **Zentralisierter Export:** Gebündelter Download von Daten, Tabellen und Grafiken in verschiedenen Formaten (CSV, Markdown, PNG, SVG).

## **2\. Systemanforderungen & Einrichtung**

### **2.1 Browser-Kompatibilität**

Die Anwendung ist für moderne, immergrüne Webbrowser optimiert. Für eine optimale Leistung und Darstellung wird die jeweils aktuelle Version von **Google Chrome, Mozilla Firefox oder Microsoft Edge** empfohlen.

### **2.2 Einrichtung**

Es ist **keine Installation** erforderlich. Die Anwendung wird vollständig clientseitig ausgeführt. Zum Starten muss lediglich die Datei index.html in einem kompatiblen Webbrowser geöffnet werden. Alle notwendigen Bibliotheken und Daten sind entweder in die Anwendung integriert oder werden über Content Delivery Networks (CDNs) nachgeladen.

### **2.3 Datenbasis**

Die Anwendung arbeitet auf einem fest integrierten, anonymisierten Patientendatensatz, der in der Datei data/patient\_data.js definiert ist. Dieser Datensatz umfasst alle für die Analyse notwendigen klinischen, pathologischen und radiologischen Informationen.

## **3\. Benutzeroberfläche & Globale Konzepte**

### **3.1 Anwendungs-Header**

Der Header ist zu jeder Zeit am oberen Bildschirmrand fixiert und bietet einen schnellen Überblick sowie globale Steuerungsmöglichkeiten.

* **Logo & Titel:** Zeigt das Anwendungslogo und den Titel.  
* **Globale Statusanzeige:** Eine Reihe von Kennzahlen, die sich dynamisch mit der Auswahl des Analysekollektivs aktualisieren:  
  * **Kollektiv:** Name der aktuell ausgewählten Patientengruppe.  
  * **Pat.:** Gesamtzahl der Patienten im aktuellen Kollektiv.  
  * **N:** Anteil der Patienten mit pathologisch bestätigtem Lymphknotenbefall (N+).  
  * **AS:** Anteil der Patienten mit positivem Avocado Sign (AS+).  
  * **T2:** Anteil der Patienten, die nach den aktuell im "Auswertung"-Tab definierten T2-Kriterien als positiv bewertet werden.  
* **Kurzanleitung:** Ein Button (), der ein Modal-Fenster mit einer Einführung in die Hauptfunktionen der Anwendung öffnet.  
* **Kollektiv-Auswahl:** Eine Button-Gruppe, mit der der globale Datenfilter gesetzt wird. Die Auswahl beeinflusst die angezeigten Daten und Analysen in den meisten Tabs.  
  * **Gesamt:** Alle Patienten des Datensatzes.  
  * **Direkt OP:** Nur Patienten, die ohne neoadjuvante Radiochemotherapie (nRCT) operiert wurden (Primär-Staging).  
  * **nRCT:** Nur Patienten, die nach einer nRCT operiert wurden (Restaging).

### **3.2 Hauptnavigation**

Die Anwendung ist in sechs thematische Module unterteilt, die über eine Reiter-Navigation (Tabs) am oberen Rand zugänglich sind: **Daten, Auswertung, Statistik, Präsentation, Publikation, Export**.

### **3.3 Interaktionskonzepte**

* **Tooltips:** Nahezu alle Bedienelemente, Spaltenüberschriften und statistischen Kennzahlen sind mit detaillierten Tooltips versehen. Eine kurze Mausberührung zeigt Erklärungen zur Funktion, Definitionen oder kontextbezogene Interpretationen an.  
* **Kartenbasiertes Layout:** Komplexe Ansichten (z.B. in "Auswertung" und "Statistik") sind in logische Einheiten, sogenannte "Karten", unterteilt, um die Übersichtlichkeit zu erhöhen.  
* **Modale Fenster:** Wichtige, aber seltener benötigte Funktionen wie die Kurzanleitung oder die Detailergebnisse der Brute-Force-Optimierung werden in überlagernden Modal-Fenstern dargestellt, um den Hauptarbeitsbereich nicht zu überladen.

## **4\. Detaillierte Beschreibung der Module (Tabs)**

### **4.1 Daten-Tab**

* **Zweck:** Dient der reinen Ansicht und Exploration des (gefilterten) Patientendatensatzes.  
* **Funktionen:**  
  * **Patiententabelle:** Zeigt eine Liste aller Patienten im aktuell ausgewählten Kollektiv.  
  * **Sortierung:** Ein Klick auf eine Spaltenüberschrift sortiert die Tabelle auf- oder absteigend nach dem entsprechenden Merkmal. Bei der "N/AS/T2"-Spalte kann durch Klick auf die einzelnen Buchstaben (N, AS, T2) spezifisch nach diesem Status sortiert werden.  
  * **Detailansicht:** Bei Patienten mit vorhandenen T2-Lymphknotendaten kann durch einen Klick auf die Zeile eine Detailansicht aufgeklappt werden. Diese zeigt die spezifischen morphologischen Eigenschaften jedes einzelnen dokumentierten Lymphknotens an.  
  * **Alle Details ein-/ausblenden:** Ein Button oberhalb der Tabelle ermöglicht das gleichzeitige Auf- oder Zuklappen aller Detailansichten.

### **4.2 Auswertung-Tab**

Dies ist der interaktive Kern der Anwendung zur Definition und Analyse von T2-Kriterien.

* **Layout:** Die Seite ist in mehrere logische Karten unterteilt.  
* **Dashboard-Karten:** Sechs Karten am oberen Rand visualisieren die Verteilung von Alter, Geschlecht, Therapieform und den jeweiligen Status (N, AS, T2) für das aktuelle Kollektiv.  
* **T2-Kriterien Definieren (Karte):**  
  * **Aktivierung:** Jedes der fünf morphologischen Kriterien (Größe, Form, Kontur, Homogenität, Signal) kann über einen Schalter aktiviert oder deaktiviert werden. Nur aktivierte Kriterien fließen in die Berechnung ein.  
  * **Größen-Schwellenwert:** Ein Schieberegler und ein zugehöriges Eingabefeld ermöglichen die präzise Einstellung des Grenzwertes für die Lymphknoten-Kurzachse.  
  * **Merkmalsauswahl:** Für die Kriterien Form, Kontur, Homogenität und Signal wird die als "positiv" zu wertende Eigenschaft per Klick auf den entsprechenden Button ausgewählt.  
  * **Logik-Schalter:** Definiert, wie die aktivierten Kriterien kombiniert werden. **UND** bedeutet, ein Lymphknoten muss *alle* aktiven Kriterien erfüllen, um positiv zu sein. **ODER** bedeutet, ein Lymphknoten muss nur *mindestens eines* der aktiven Kriterien erfüllen.  
  * **Steuerung:**  
    * **Zurücksetzen:** Setzt alle Kriterien und die Logik auf die Standardwerte zurück.  
    * **Anwenden & Speichern:** Übernimmt die aktuell eingestellten Kriterien als neue globale "angewandte" Kriterien. Diese werden im Browser gespeichert und in den anderen Tabs (Statistik, Präsentation, Publikation) für Vergleiche herangezogen. Änderungen werden durch einen visuellen Indikator (Sternchen \*) am "Anwenden"-Button signalisiert.  
* **T2 Gütekriterien (Karte):** Zeigt die diagnostische Performance (Sensitivität, Spezifität, PPV, NPV, Accuracy, AUC) der *aktuell eingestellten* (nicht zwingend der angewendeten) T2-Kriterien im Vergleich zum pathologischen Goldstandard (N-Status). Diese Werte aktualisieren sich bei jeder Änderung an den Kriterien in Echtzeit.  
* **Brute-Force Optimierung (Karte):**  
  * **Zweck:** Findet durch systematisches Testen aller sinnvollen Kriterienkombinationen das Set, welches die gewählte Zielmetrik (z.B. "Balanced Accuracy") maximiert.  
  * **Bedienung:** Der Nutzer wählt eine Zielmetrik aus und startet die Analyse per Knopfdruck. Ein Fortschrittsbalken informiert über den Verlauf. Die Berechnung läuft in einem Hintergrund-Thread, um die Anwendung reaktionsfähig zu halten.  
  * **Ergebnis:** Nach Abschluss wird das beste gefundene Kriterienset angezeigt und kann direkt in die Steuerungselemente übernommen und angewendet werden.  
* **Patientenübersicht (Karte):** Eine Tabelle, identisch zur Ansicht im "Daten"-Tab, jedoch werden hier die Spalten "T2-Status" und die Lymphknoten-Detailansichten basierend auf den *aktuell eingestellten* Kriterien dynamisch neu bewertet und farblich hervorgehoben (positiv bewertete LK).

### **4.3 Statistik-Tab**

* **Zweck:** Bietet detaillierte statistische Vergleiche und Visualisierungen.  
* **Ansichten:**  
  * **Einzelansicht:** Zeigt eine umfassende Analyse für das global ausgewählte Kollektiv.  
  * **Vergleichsansicht:** Ermöglicht die Auswahl von zwei Kollektiven (z.B. "Direkt OP" vs. "nRCT"), die dann nebeneinander dargestellt und verglichen werden.  
* **Inhalte (pro Kollektiv):**  
  * **Deskriptive Statistik:** Eine Zusammenfassung der Patientencharakteristika.  
  * **Güte Avocado Sign:** Eine Karte mit Konfusionsmatrix, ROC-Kurve und einer Tabelle der diagnostischen Gütekriterien (inkl. 95% Konfidenzintervallen) für das Avocado Sign.  
  * **Güte T2-Kriterien:** Eine identische Karte für die aktuell global *angewendeten* T2-Kriterien.  
  * **Vergleich AS vs. T2:** Eine Karte, die die Ergebnisse der statistischen Tests (McNemar für Accuracy, DeLong für AUC) zum direkten Vergleich beider Methoden anzeigt.

### **4.4 Präsentation-Tab**

* **Zweck:** Erstellt kompakte, publikationsreife Übersichten und Diagramme.  
* **Ansichten:**  
  * **Avocado Sign Performance:** Zeigt eine übersichtliche Tabelle der diagnostischen Güte des Avocado Signs über alle drei Kollektive hinweg.  
  * **AS vs. T2 Vergleich:** Ermöglicht den direkten Vergleich des Avocado Signs mit einem ausgewählten T2-Kriterienset. Als Vergleichsbasis kann der Nutzer entweder die aktuell global *angewendeten* Kriterien oder eines der in der Literatur etablierten Kriteriensets (z.B. ESGAR 2016\) auswählen. Die Ansicht zeigt eine Metrikentabelle, statistische Test-Ergebnisse und ein vergleichendes Balkendiagramm.

### **4.5 Publikation-Tab**

* **Zweck:** Dient als Assistent zur Erstellung eines wissenschaftlichen Manuskripts.  
* **Layout:** Eine zweispaltige Ansicht. Links befindet sich eine **fixierte Navigationsleiste**, die beim Scrollen sichtbar bleibt und die Gliederung des Manuskripts anzeigt. Sie hebt automatisch den aktuell im Hauptfenster sichtbaren Abschnitt hervor (Scroll-Spying). Rechts ist der **Inhaltsbereich**.  
* **Funktionen:**  
  * **Sprachauswahl:** Erlaubt das Umschalten des generierten Textes zwischen Deutsch und Englisch.  
  * **Brute-Force Metrik:** Bestimmt, welches optimierte T2-Kriterienset in den Textabschnitten, die sich auf die "optimierten Kriterien" beziehen, beschrieben und verwendet wird.  
  * **Dynamische Inhalte:** Der gesamte Text, alle Tabellen und Abbildungen im Inhaltsbereich werden dynamisch basierend auf den aktuellen Daten und den global angewendeten T2-Kriterien generiert. Alle Inhalte sind streng nach den **Stilvorgaben des Journals "Radiology"** formatiert.  
  * **Export:** Ein Button am Ende der Seite ermöglicht den Export des gesamten Manuskriptentwurfs als einzelne, formatierte Markdown-Datei.

### **4.6 Export-Tab**

* **Zweck:** Stellt eine zentrale Anlaufstelle für den Download von Daten und Ergebnissen dar.  
* **Funktionen:** Bietet Buttons zum Herunterladen verschiedener Artefakte, die sich auf das aktuell ausgewählte globale Kollektiv beziehen. Dies umfasst:  
  * **Rohdaten** (CSV)  
  * **Auswertungstabellen** (CSV, Markdown)  
  * **Statistik-Übersichten** (CSV, Markdown)  
  * **Diagramme und Tabellen** (PNG, SVG)  
  * **ZIP-Archive:** Bündelt mehrere zusammengehörige Dateien (z.B. alle Grafiken) in einem einzigen Download.

## **5\. Datenmanagement & Persistenz**

### **5.1 Datenquelle**

Die Anwendung nutzt einen statischen, in die Datei data/patient\_data.js eingebetteten Datensatz. Es findet keine Kommunikation mit einem externen Server oder einer Datenbank statt.

### **5.2 Anwendungszustand**

Um die Benutzerfreundlichkeit zu erhöhen, speichert die Anwendung bestimmte Benutzereinstellungen im localStorage des Webbrowsers. Dazu gehören:

* Das zuletzt ausgewählte globale Kollektiv.  
* Die zuletzt angewendeten T2-Kriterien und die zugehörige Logik.  
* Die zuletzt gewählten Einstellungen in den Tabs "Statistik", "Präsentation" und "Publikation".

Diese Einstellungen bleiben somit auch nach einem Neuladen der Seite erhalten.
